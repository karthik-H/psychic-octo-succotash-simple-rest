{
  "function": [
    {
      "implementation_id": "service_get_user_by_email",
      "test_cases": [
        {
          "id": "get_user_by_email_existing_user",
          "name": "test_existing_user_by_email",
          "description": "Should return the user object when a user with the given email exists in the database.",
          "type": "positive",
          "test_setup": {
            "given": "A user with email 'test@example.com' exists in the User table.",
            "when": "get_user_by_email('test@example.com') is called",
            "then": "The function returns the user object corresponding to 'test@example.com'."
          },
          "implementation_id": "service_get_user_by_email"
        },
        {
          "id": "get_user_by_email_nonexistent_user",
          "name": "test_nonexistent_user_by_email",
          "description": "Should return None when no user with the given email exists in the database.",
          "type": "negative",
          "test_setup": {
            "given": "No user with email 'nouser@example.com' exists in the User table.",
            "when": "get_user_by_email('nouser@example.com') is called",
            "then": "The function returns None."
          },
          "implementation_id": "service_get_user_by_email"
        },
        {
          "id": "get_user_by_email_case_sensitivity",
          "name": "test_email_case_sensitivity",
          "description": "Should handle case sensitivity according to database collation (e.g., treat 'Test@Example.com' and 'test@example.com' as the same or different based on configuration).",
          "type": "edge",
          "test_setup": {
            "given": "A user with email 'test@example.com' exists in the User table.",
            "when": "get_user_by_email('Test@Example.com') is called",
            "then": "The function returns the user object if the lookup is case-insensitive, or None if case-sensitive."
          },
          "implementation_id": "service_get_user_by_email"
        },
        {
          "id": "get_user_by_email_empty_string",
          "name": "test_empty_email_string",
          "description": "Should return None or raise an error when an empty string is provided as the email.",
          "type": "negative",
          "test_setup": {
            "given": "The User table may or may not contain users with empty email fields (should not in a well-formed schema).",
            "when": "get_user_by_email('') is called",
            "then": "The function returns None or raises a validation/database error."
          },
          "implementation_id": "service_get_user_by_email"
        },
        {
          "id": "get_user_by_email_invalid_email_format",
          "name": "test_invalid_email_format",
          "description": "Should return None or raise an error when an invalid email format is provided.",
          "type": "negative",
          "test_setup": {
            "given": "No user with email 'invalid-email' exists in the User table.",
            "when": "get_user_by_email('invalid-email') is called",
            "then": "The function returns None or raises a validation/database error."
          },
          "implementation_id": "service_get_user_by_email"
        },
        {
          "id": "get_user_by_email_null_email",
          "name": "test_null_email",
          "description": "Should raise an error when None is provided as the email parameter.",
          "type": "negative",
          "test_setup": {
            "given": "The function is called with None as the email parameter.",
            "when": "get_user_by_email(None) is called",
            "then": "The function raises a TypeError or returns None, depending on implementation."
          },
          "implementation_id": "service_get_user_by_email"
        },
        {
          "id": "get_user_by_email_multiple_users_same_email",
          "name": "test_multiple_users_same_email",
          "description": "Should return the first user found if multiple users with the same email exist (should not happen if unique constraint is enforced).",
          "type": "edge",
          "test_setup": {
            "given": "Multiple users with email 'duplicate@example.com' exist in the User table due to data inconsistency.",
            "when": "get_user_by_email('duplicate@example.com') is called",
            "then": "The function returns one of the user objects with that email."
          },
          "implementation_id": "service_get_user_by_email"
        },
        {
          "id": "get_user_by_email_whitespace_email",
          "name": "test_email_with_whitespace",
          "description": "Should handle emails with leading/trailing whitespace appropriately.",
          "type": "edge",
          "test_setup": {
            "given": "A user with email 'whitespace@example.com' exists in the User table.",
            "when": "get_user_by_email('  whitespace@example.com  ') is called",
            "then": "The function returns the user object if whitespace is trimmed, or None if not."
          },
          "implementation_id": "service_get_user_by_email"
        },
        {
          "id": "get_user_by_email_special_characters",
          "name": "test_email_with_special_characters",
          "description": "Should correctly handle emails containing special characters.",
          "type": "positive",
          "test_setup": {
            "given": "A user with email 'user+tag@example.com' exists in the User table.",
            "when": "get_user_by_email('user+tag@example.com') is called",
            "then": "The function returns the user object corresponding to 'user+tag@example.com'."
          },
          "implementation_id": "service_get_user_by_email"
        }
      ]
    },
    {
      "implementation_id": "service_create_user",
      "test_cases": [
        {
          "id": "add_user_successful_creation",
          "name": "test_create_user_success",
          "description": "Successfully creates a new user with valid username, email, age, and work_role.",
          "type": "positive",
          "test_setup": {
            "given": "A valid username, unique email, valid age, and valid work_role.",
            "when": "create_user is called with these parameters.",
            "then": "A new user is added to the database and returned with correct attributes."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_duplicate_email",
          "name": "test_create_user_duplicate_email",
          "description": "Fails to create a user when the email already exists in the database.",
          "type": "negative",
          "test_setup": {
            "given": "An email that already exists in the database.",
            "when": "create_user is called with this duplicate email.",
            "then": "An integrity error or exception is raised, and no new user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_missing_username",
          "name": "test_create_user_missing_username",
          "description": "Fails to create a user when the username is missing.",
          "type": "negative",
          "test_setup": {
            "given": "A valid email, age, and work_role, but username is missing or None.",
            "when": "create_user is called.",
            "then": "A validation error or exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_missing_email",
          "name": "test_create_user_missing_email",
          "description": "Fails to create a user when the email is missing.",
          "type": "negative",
          "test_setup": {
            "given": "A valid username, age, and work_role, but email is missing or None.",
            "when": "create_user is called.",
            "then": "A validation error or exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_invalid_email_format",
          "name": "test_create_user_invalid_email_format",
          "description": "Fails to create a user when the email format is invalid.",
          "type": "negative",
          "test_setup": {
            "given": "A username, age, work_role, and an invalid email format (e.g., 'user@').",
            "when": "create_user is called.",
            "then": "A validation error or exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_minimum_age_boundary",
          "name": "test_create_user_minimum_age",
          "description": "Creates a user with the minimum allowed age.",
          "type": "positive",
          "test_setup": {
            "given": "A valid username, email, work_role, and the minimum allowed age (e.g., 0 or 18 depending on requirements).",
            "when": "create_user is called.",
            "then": "A new user is created if the age is valid per requirements."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_maximum_age_boundary",
          "name": "test_create_user_maximum_age",
          "description": "Creates a user with the maximum allowed age.",
          "type": "positive",
          "test_setup": {
            "given": "A valid username, email, work_role, and the maximum allowed age (e.g., 120).",
            "when": "create_user is called.",
            "then": "A new user is created if the age is valid per requirements."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_age_below_minimum",
          "name": "test_create_user_age_below_minimum",
          "description": "Fails to create a user when age is below the minimum allowed.",
          "type": "negative",
          "test_setup": {
            "given": "A valid username, email, work_role, and an age below the minimum allowed.",
            "when": "create_user is called.",
            "then": "A validation error or exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_age_above_maximum",
          "name": "test_create_user_age_above_maximum",
          "description": "Fails to create a user when age is above the maximum allowed.",
          "type": "negative",
          "test_setup": {
            "given": "A valid username, email, work_role, and an age above the maximum allowed.",
            "when": "create_user is called.",
            "then": "A validation error or exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_missing_work_role",
          "name": "test_create_user_missing_work_role",
          "description": "Fails to create a user when work_role is missing.",
          "type": "negative",
          "test_setup": {
            "given": "A valid username, email, age, but work_role is missing or None.",
            "when": "create_user is called.",
            "then": "A validation error or exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_empty_username",
          "name": "test_create_user_empty_username",
          "description": "Fails to create a user when username is an empty string.",
          "type": "negative",
          "test_setup": {
            "given": "An empty string for username, valid email, age, and work_role.",
            "when": "create_user is called.",
            "then": "A validation error or exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_empty_email",
          "name": "test_create_user_empty_email",
          "description": "Fails to create a user when email is an empty string.",
          "type": "negative",
          "test_setup": {
            "given": "A valid username, empty string for email, age, and work_role.",
            "when": "create_user is called.",
            "then": "A validation error or exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_empty_work_role",
          "name": "test_create_user_empty_work_role",
          "description": "Fails to create a user when work_role is an empty string.",
          "type": "negative",
          "test_setup": {
            "given": "A valid username, email, age, and empty string for work_role.",
            "when": "create_user is called.",
            "then": "A validation error or exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_null_age",
          "name": "test_create_user_null_age",
          "description": "Fails to create a user when age is None.",
          "type": "negative",
          "test_setup": {
            "given": "A valid username, email, work_role, and age is None.",
            "when": "create_user is called.",
            "then": "A validation error or exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_database_commit_failure",
          "name": "test_create_user_database_commit_failure",
          "description": "Handles database commit failure gracefully.",
          "type": "negative",
          "test_setup": {
            "given": "A valid user input, but the database session commit fails (e.g., due to DB connection loss).",
            "when": "create_user is called.",
            "then": "An exception is raised, and no user is created."
          },
          "implementation_id": "service_create_user"
        },
        {
          "id": "add_user_refresh_failure",
          "name": "test_create_user_refresh_failure",
          "description": "Handles failure during the refresh step after commit.",
          "type": "negative",
          "test_setup": {
            "given": "A valid user input, commit succeeds, but refresh fails (e.g., due to DB error).",
            "when": "create_user is called.",
            "then": "An exception is raised, and the user is not returned."
          },
          "implementation_id": "service_create_user"
        }
      ]
    },
    {
      "implementation_id": "model_user",
      "test_cases": [
        {
          "id": "add_user_valid_data",
          "name": "test_add_user_with_valid_data",
          "description": "Add a user with valid and unique email, name, age, and work_role.",
          "type": "positive",
          "test_setup": {
            "given": "A clean database with no users. Input: name='Alice', email='alice@example.com', age=30, work_role='Engineer'.",
            "when": "A new User is created and saved.",
            "then": "User is successfully added. The database contains one user with the provided details."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_duplicate_email",
          "name": "test_add_user_with_duplicate_email",
          "description": "Attempt to add a user with an email that already exists in the database.",
          "type": "negative",
          "test_setup": {
            "given": "A user with email='bob@example.com' already exists. Input: name='Bob2', email='bob@example.com', age=25, work_role='Designer'.",
            "when": "A new User is created and saved.",
            "then": "Operation fails due to unique email constraint. IntegrityError or equivalent is raised."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_missing_email",
          "name": "test_add_user_missing_email",
          "description": "Attempt to add a user without providing an email.",
          "type": "negative",
          "test_setup": {
            "given": "Input: name='Charlie', email=None, age=22, work_role='Analyst'.",
            "when": "A new User is created and saved.",
            "then": "Operation fails due to missing required field. ValidationError or equivalent is raised."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_invalid_email_format",
          "name": "test_add_user_invalid_email_format",
          "description": "Attempt to add a user with an invalid email format.",
          "type": "negative",
          "test_setup": {
            "given": "Input: name='Dana', email='not-an-email', age=28, work_role='Manager'.",
            "when": "A new User is created and saved.",
            "then": "Operation fails due to invalid email format. ValidationError or equivalent is raised."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_missing_name",
          "name": "test_add_user_missing_name",
          "description": "Attempt to add a user without providing a name.",
          "type": "negative",
          "test_setup": {
            "given": "Input: name=None, email='eve@example.com', age=35, work_role='Director'.",
            "when": "A new User is created and saved.",
            "then": "Operation fails due to missing required field. ValidationError or equivalent is raised."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_empty_name",
          "name": "test_add_user_empty_name",
          "description": "Attempt to add a user with an empty string as the name.",
          "type": "negative",
          "test_setup": {
            "given": "Input: name='', email='frank@example.com', age=40, work_role='CEO'.",
            "when": "A new User is created and saved.",
            "then": "Operation fails due to invalid name. ValidationError or equivalent is raised."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_minimum_age",
          "name": "test_add_user_with_minimum_age",
          "description": "Add a user with the minimum allowed age (boundary condition).",
          "type": "positive",
          "test_setup": {
            "given": "Input: name='Grace', email='grace@example.com', age=0, work_role='Intern'.",
            "when": "A new User is created and saved.",
            "then": "User is successfully added if age=0 is allowed by schema."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_negative_age",
          "name": "test_add_user_with_negative_age",
          "description": "Attempt to add a user with a negative age.",
          "type": "negative",
          "test_setup": {
            "given": "Input: name='Hank', email='hank@example.com', age=-1, work_role='Tester'.",
            "when": "A new User is created and saved.",
            "then": "Operation fails due to invalid age. ValidationError or equivalent is raised."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_missing_work_role",
          "name": "test_add_user_missing_work_role",
          "description": "Attempt to add a user without providing a work_role.",
          "type": "negative",
          "test_setup": {
            "given": "Input: name='Ivy', email='ivy@example.com', age=27, work_role=None.",
            "when": "A new User is created and saved.",
            "then": "Operation fails due to missing required field. ValidationError or equivalent is raised."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_long_email",
          "name": "test_add_user_with_long_email",
          "description": "Add a user with an email at the maximum allowed length.",
          "type": "positive",
          "test_setup": {
            "given": "Input: name='Jack', email='a...a@example.com' (max length), age=31, work_role='Architect'.",
            "when": "A new User is created and saved.",
            "then": "User is successfully added if email length is within schema constraints."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_long_name",
          "name": "test_add_user_with_long_name",
          "description": "Add a user with a name at the maximum allowed length.",
          "type": "positive",
          "test_setup": {
            "given": "Input: name='A...A' (max length), email='kate@example.com', age=29, work_role='Consultant'.",
            "when": "A new User is created and saved.",
            "then": "User is successfully added if name length is within schema constraints."
          },
          "implementation_id": "model_user"
        },
        {
          "id": "add_user_null_fields",
          "name": "test_add_user_with_all_null_fields",
          "description": "Attempt to add a user with all fields set to null.",
          "type": "negative",
          "test_setup": {
            "given": "Input: name=None, email=None, age=None, work_role=None.",
            "when": "A new User is created and saved.",
            "then": "Operation fails due to missing required fields. ValidationError or equivalent is raised."
          },
          "implementation_id": "model_user"
        }
      ]
    },
    {
      "implementation_id": "schema_usercreate",
      "test_cases": [
        {
          "id": "usercreate_valid_all_fields",
          "name": "test_valid_user_creation_all_fields",
          "description": "Verify UserCreate accepts valid input with all required fields (email, name) and optional fields (age, work_role) present.",
          "type": "positive",
          "test_setup": {
            "given": "A payload with valid email, name, age, and work_role.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation passes and the object is created successfully."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_valid_minimal_fields",
          "name": "test_valid_user_creation_minimal_fields",
          "description": "Verify UserCreate accepts valid input with only required fields (email, name).",
          "type": "positive",
          "test_setup": {
            "given": "A payload with valid email and name only.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation passes and the object is created successfully."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_missing_email",
          "name": "test_missing_email_field",
          "description": "Verify UserCreate rejects input when the required email field is missing.",
          "type": "negative",
          "test_setup": {
            "given": "A payload with name but without email.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation fails with a missing field error for email."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_missing_name",
          "name": "test_missing_name_field",
          "description": "Verify UserCreate rejects input when the required name field is missing.",
          "type": "negative",
          "test_setup": {
            "given": "A payload with email but without name.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation fails with a missing field error for name."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_missing_both_required",
          "name": "test_missing_both_required_fields",
          "description": "Verify UserCreate rejects input when both required fields (email, name) are missing.",
          "type": "negative",
          "test_setup": {
            "given": "A payload with neither email nor name.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation fails with missing field errors for both email and name."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_invalid_email_type",
          "name": "test_invalid_email_type",
          "description": "Verify UserCreate rejects input when email is not a string.",
          "type": "negative",
          "test_setup": {
            "given": "A payload with email as a non-string (e.g., integer) and valid name.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation fails with a type error for email."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_invalid_name_type",
          "name": "test_invalid_name_type",
          "description": "Verify UserCreate rejects input when name is not a string.",
          "type": "negative",
          "test_setup": {
            "given": "A payload with name as a non-string (e.g., integer) and valid email.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation fails with a type error for name."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_empty_email",
          "name": "test_empty_email",
          "description": "Verify UserCreate handles empty string for email.",
          "type": "negative",
          "test_setup": {
            "given": "A payload with email as an empty string and valid name.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation fails if empty strings are not allowed for email."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_empty_name",
          "name": "test_empty_name",
          "description": "Verify UserCreate handles empty string for name.",
          "type": "negative",
          "test_setup": {
            "given": "A payload with name as an empty string and valid email.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation fails if empty strings are not allowed for name."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_extra_fields",
          "name": "test_extra_fields_ignored",
          "description": "Verify UserCreate handles extra fields not defined in the schema.",
          "type": "positive",
          "test_setup": {
            "given": "A payload with valid email, name, and additional unexpected fields.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation passes and extra fields are ignored or raise an error depending on schema config."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_email_boundary_length",
          "name": "test_email_boundary_length",
          "description": "Verify UserCreate handles email at maximum allowed length (if any).",
          "type": "positive",
          "test_setup": {
            "given": "A payload with email at the maximum allowed length and valid name.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation passes if within allowed length, fails otherwise."
          },
          "implementation_id": "schema_usercreate"
        },
        {
          "id": "usercreate_name_boundary_length",
          "name": "test_name_boundary_length",
          "description": "Verify UserCreate handles name at maximum allowed length (if any).",
          "type": "positive",
          "test_setup": {
            "given": "A payload with name at the maximum allowed length and valid email.",
            "when": "UserCreate schema is instantiated with the payload.",
            "then": "Schema validation passes if within allowed length, fails otherwise."
          },
          "implementation_id": "schema_usercreate"
        }
      ]
    },
    {
      "implementation_id": "function_get_user_by_email_service",
      "test_cases": [
        {
          "id": "get_user_by_email_existing_user",
          "name": "test_existing_user_by_email",
          "description": "Should return the user object when a user with the given email exists in the database.",
          "type": "positive",
          "test_setup": {
            "given": "A user with email 'test@example.com' exists in the User table.",
            "when": "get_user_by_email('test@example.com') is called.",
            "then": "The function returns the user object corresponding to 'test@example.com'."
          },
          "implementation_id": "function_get_user_by_email_service"
        },
        {
          "id": "get_user_by_email_nonexistent_user",
          "name": "test_nonexistent_user_by_email",
          "description": "Should return None when no user with the given email exists in the database.",
          "type": "negative",
          "test_setup": {
            "given": "No user with email 'nouser@example.com' exists in the User table.",
            "when": "get_user_by_email('nouser@example.com') is called.",
            "then": "The function returns None."
          },
          "implementation_id": "function_get_user_by_email_service"
        },
        {
          "id": "get_user_by_email_case_sensitivity",
          "name": "test_email_case_sensitivity",
          "description": "Should handle case sensitivity according to database collation (e.g., treat 'Test@Example.com' and 'test@example.com' as the same or different based on configuration).",
          "type": "edge",
          "test_setup": {
            "given": "A user with email 'test@example.com' exists in the User table.",
            "when": "get_user_by_email('Test@Example.com') is called.",
            "then": "The function returns the user object if the lookup is case-insensitive, or None if case-sensitive."
          },
          "implementation_id": "function_get_user_by_email_service"
        },
        {
          "id": "get_user_by_email_empty_string",
          "name": "test_empty_email_string",
          "description": "Should return None or raise an appropriate error when an empty string is provided as the email.",
          "type": "negative",
          "test_setup": {
            "given": "The User table may contain users, but none with an empty email.",
            "when": "get_user_by_email('') is called.",
            "then": "The function returns None or raises a ValueError/appropriate exception."
          },
          "implementation_id": "function_get_user_by_email_service"
        },
        {
          "id": "get_user_by_email_invalid_email_format",
          "name": "test_invalid_email_format",
          "description": "Should return None or raise an appropriate error when an invalid email format is provided.",
          "type": "negative",
          "test_setup": {
            "given": "The User table may contain users, but none with email 'invalid-email'.",
            "when": "get_user_by_email('invalid-email') is called.",
            "then": "The function returns None or raises a ValueError/appropriate exception."
          },
          "implementation_id": "function_get_user_by_email_service"
        },
        {
          "id": "get_user_by_email_multiple_users_same_email",
          "name": "test_multiple_users_same_email",
          "description": "Should return the first user found if multiple users with the same email exist (should not happen if unique constraint is enforced).",
          "type": "edge",
          "test_setup": {
            "given": "Multiple users with email 'duplicate@example.com' exist in the User table due to data inconsistency.",
            "when": "get_user_by_email('duplicate@example.com') is called.",
            "then": "The function returns one of the user objects with that email."
          },
          "implementation_id": "function_get_user_by_email_service"
        },
        {
          "id": "get_user_by_email_null_email",
          "name": "test_null_email_argument",
          "description": "Should raise an appropriate error when None is provided as the email argument.",
          "type": "negative",
          "test_setup": {
            "given": "The User table may contain users, but None is not a valid email.",
            "when": "get_user_by_email(None) is called.",
            "then": "The function raises a TypeError or appropriate exception."
          },
          "implementation_id": "function_get_user_by_email_service"
        },
        {
          "id": "get_user_by_email_whitespace_email",
          "name": "test_whitespace_email",
          "description": "Should return None or raise an appropriate error when an email with only whitespace is provided.",
          "type": "negative",
          "test_setup": {
            "given": "The User table may contain users, but none with email consisting only of whitespace.",
            "when": "get_user_by_email('   ') is called.",
            "then": "The function returns None or raises a ValueError/appropriate exception."
          },
          "implementation_id": "function_get_user_by_email_service"
        },
        {
          "id": "get_user_by_email_special_characters",
          "name": "test_email_with_special_characters",
          "description": "Should correctly handle emails with special characters if they are valid according to the application's email validation rules.",
          "type": "edge",
          "test_setup": {
            "given": "A user with email 'user+tag@example.com' exists in the User table.",
            "when": "get_user_by_email('user+tag@example.com') is called.",
            "then": "The function returns the user object corresponding to 'user+tag@example.com'."
          },
          "implementation_id": "function_get_user_by_email_service"
        },
        {
          "id": "get_user_by_email_database_error",
          "name": "test_database_error_handling",
          "description": "Should handle database errors gracefully (e.g., connection issues, query failures).",
          "type": "negative",
          "test_setup": {
            "given": "The database connection is unavailable or a query error occurs.",
            "when": "get_user_by_email('any@example.com') is called.",
            "then": "The function raises a database exception or handles the error as per application policy."
          },
          "implementation_id": "function_get_user_by_email_service"
        }
      ]
    },
    {
      "implementation_id": "function_create_user_service",
      "test_cases": [
        {
          "id": "create_user_valid_input",
          "name": "test_create_user_with_valid_input",
          "description": "Should create a new user when provided with valid username, email, age, and work_role.",
          "type": "positive",
          "test_setup": {
            "given": "A valid user data dictionary with unique email, valid username, age within allowed range, and valid work_role.",
            "when": "create_user is called with this data.",
            "then": "A new user is created in the database and returned with correct attributes."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_missing_email",
          "name": "test_create_user_missing_email",
          "description": "Should fail when email is missing from input.",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary missing the email field.",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating email is required."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_invalid_email_format",
          "name": "test_create_user_invalid_email_format",
          "description": "Should fail when email format is invalid.",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary with an invalid email format (e.g., 'useratexample.com').",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating invalid email format."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_missing_username",
          "name": "test_create_user_missing_username",
          "description": "Should fail when username is missing from input.",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary missing the username field.",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating username is required."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_minimum_age",
          "name": "test_create_user_with_minimum_age",
          "description": "Should create a user when age is at the minimum allowed value.",
          "type": "positive",
          "test_setup": {
            "given": "A user data dictionary with age set to the minimum allowed (e.g., 0 or 18 depending on requirements).",
            "when": "create_user is called with this data.",
            "then": "A new user is created and returned with the correct age."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_maximum_age",
          "name": "test_create_user_with_maximum_age",
          "description": "Should create a user when age is at the maximum allowed value.",
          "type": "positive",
          "test_setup": {
            "given": "A user data dictionary with age set to the maximum allowed (e.g., 120).",
            "when": "create_user is called with this data.",
            "then": "A new user is created and returned with the correct age."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_age_below_minimum",
          "name": "test_create_user_with_age_below_minimum",
          "description": "Should fail when age is below the minimum allowed value.",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary with age below the minimum allowed (e.g., -1 or 17).",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating age is out of bounds."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_age_above_maximum",
          "name": "test_create_user_with_age_above_maximum",
          "description": "Should fail when age is above the maximum allowed value.",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary with age above the maximum allowed (e.g., 121).",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating age is out of bounds."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_missing_work_role",
          "name": "test_create_user_missing_work_role",
          "description": "Should fail when work_role is missing from input.",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary missing the work_role field.",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating work_role is required."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_empty_username",
          "name": "test_create_user_with_empty_username",
          "description": "Should fail when username is an empty string.",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary with username as an empty string.",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating username cannot be empty."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_empty_email",
          "name": "test_create_user_with_empty_email",
          "description": "Should fail when email is an empty string.",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary with email as an empty string.",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating email cannot be empty."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_empty_work_role",
          "name": "test_create_user_with_empty_work_role",
          "description": "Should fail when work_role is an empty string.",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary with work_role as an empty string.",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating work_role cannot be empty."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_null_fields",
          "name": "test_create_user_with_null_fields",
          "description": "Should fail when any required field is null.",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary with one or more required fields set to null.",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating required fields cannot be null."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_database_failure",
          "name": "test_create_user_database_failure",
          "description": "Should handle database commit failure gracefully.",
          "type": "negative",
          "test_setup": {
            "given": "A valid user data dictionary and a simulated database failure during commit.",
            "when": "create_user is called and the database commit fails.",
            "then": "An exception is raised or an error is returned indicating database failure, and no user is created."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_duplicate_email",
          "name": "test_create_user_with_duplicate_email",
          "description": "Should fail when trying to create a user with an email that already exists (if duplicate check is not handled elsewhere).",
          "type": "negative",
          "test_setup": {
            "given": "A user data dictionary with an email that already exists in the database.",
            "when": "create_user is called with this data.",
            "then": "An exception is raised or an error is returned indicating duplicate email."
          },
          "implementation_id": "function_create_user_service"
        },
        {
          "id": "create_user_extra_fields",
          "name": "test_create_user_with_extra_fields",
          "description": "Should ignore extra fields not defined in the user model.",
          "type": "positive",
          "test_setup": {
            "given": "A user data dictionary with all required fields and additional irrelevant fields.",
            "when": "create_user is called with this data.",
            "then": "A new user is created, extra fields are ignored, and only defined fields are stored."
          },
          "implementation_id": "function_create_user_service"
        }
      ]
    }
  ],
  "component": [],
  "endpoint": [
    {
      "implementation_id": "endpoint_create_user_post_/users/",
      "test_cases": [
        {
          "id": "add_user_success",
          "name": "test_create_user_success",
          "description": "Successfully create a new user with valid data.",
          "type": "positive",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"john_doe\", \"email\": \"john@example.com\", \"age\": 30, \"work_role\": \"developer\"}",
          "response_status_code": 201,
          "response_body_json": "{\"username\": \"john_doe\", \"email\": \"john@example.com\", \"age\": 30, \"work_role\": \"developer\"}",
          "test_setup": {
            "given": "No user exists with email 'john@example.com'",
            "when": "POST request is made to /users/ with valid user data",
            "then": "User is created and returned with status 201"
          },
          "implementation_id": "endpoint_create_user_post_/users/"
        },
        {
          "id": "duplicate_email",
          "name": "test_create_user_duplicate_email",
          "description": "Attempt to create a user with an email that is already registered.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"jane_doe\", \"email\": \"john@example.com\", \"age\": 25, \"work_role\": \"designer\"}",
          "response_status_code": 400,
          "response_body_json": "{\"detail\": \"Email already registered\"}",
          "test_setup": {
            "given": "A user already exists with email 'john@example.com'",
            "when": "POST request is made to /users/ with the same email",
            "then": "HTTP 400 error is returned with message 'Email already registered'"
          },
          "implementation_id": "endpoint_create_user_post_/users/"
        },
        {
          "id": "missing_username",
          "name": "test_create_user_missing_username",
          "description": "Attempt to create a user without providing the username field.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"email\": \"newuser@example.com\", \"age\": 22, \"work_role\": \"tester\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Field 'username' is required\"}",
          "test_setup": {
            "given": "No user exists with email 'newuser@example.com'",
            "when": "POST request is made to /users/ without 'username'",
            "then": "HTTP 422 error is returned indicating missing 'username'"
          },
          "implementation_id": "endpoint_create_user_post_/users/"
        },
        {
          "id": "missing_email",
          "name": "test_create_user_missing_email",
          "description": "Attempt to create a user without providing the email field.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"noemail\", \"age\": 22, \"work_role\": \"tester\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Field 'email' is required\"}",
          "test_setup": {
            "given": "No user exists with username 'noemail'",
            "when": "POST request is made to /users/ without 'email'",
            "then": "HTTP 422 error is returned indicating missing 'email'"
          },
          "implementation_id": "endpoint_create_user_post_/users/"
        },
        {
          "id": "invalid_email_format",
          "name": "test_create_user_invalid_email_format",
          "description": "Attempt to create a user with an invalid email format.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"bademail\", \"email\": \"not-an-email\", \"age\": 22, \"work_role\": \"tester\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Invalid email format\"}",
          "test_setup": {
            "given": "No user exists with username 'bademail'",
            "when": "POST request is made to /users/ with invalid email format",
            "then": "HTTP 422 error is returned indicating invalid email"
          },
          "implementation_id": "endpoint_create_user_post_/users/"
        },
        {
          "id": "age_boundary_min",
          "name": "test_create_user_age_min_boundary",
          "description": "Create a user with the minimum allowed age.",
          "type": "positive",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"young_user\", \"email\": \"young@example.com\", \"age\": 0, \"work_role\": \"intern\"}",
          "response_status_code": 201,
          "response_body_json": "{\"username\": \"young_user\", \"email\": \"young@example.com\", \"age\": 0, \"work_role\": \"intern\"}",
          "test_setup": {
            "given": "No user exists with email 'young@example.com'",
            "when": "POST request is made to /users/ with age 0",
            "then": "User is created and returned with status 201"
          },
          "implementation_id": "endpoint_create_user_post_/users/"
        },
        {
          "id": "age_boundary_negative",
          "name": "test_create_user_age_negative",
          "description": "Attempt to create a user with a negative age.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"neg_age\", \"email\": \"neg@example.com\", \"age\": -1, \"work_role\": \"tester\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Age must be a non-negative integer\"}",
          "test_setup": {
            "given": "No user exists with email 'neg@example.com'",
            "when": "POST request is made to /users/ with age -1",
            "then": "HTTP 422 error is returned indicating invalid age"
          },
          "implementation_id": "endpoint_create_user_post_/users/"
        },
        {
          "id": "missing_work_role",
          "name": "test_create_user_missing_work_role",
          "description": "Attempt to create a user without providing the work_role field.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"noworkrole\", \"email\": \"nowork@example.com\", \"age\": 28}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Field 'work_role' is required\"}",
          "test_setup": {
            "given": "No user exists with email 'nowork@example.com'",
            "when": "POST request is made to /users/ without 'work_role'",
            "then": "HTTP 422 error is returned indicating missing 'work_role'"
          },
          "implementation_id": "endpoint_create_user_post_/users/"
        },
        {
          "id": "extra_field_ignored",
          "name": "test_create_user_extra_field",
          "description": "Create a user with an extra field in the request body (should be ignored).",
          "type": "positive",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"extrafield\", \"email\": \"extra@example.com\", \"age\": 35, \"work_role\": \"manager\", \"extra\": \"ignoreme\"}",
          "response_status_code": 201,
          "response_body_json": "{\"username\": \"extrafield\", \"email\": \"extra@example.com\", \"age\": 35, \"work_role\": \"manager\"}",
          "test_setup": {
            "given": "No user exists with email 'extra@example.com'",
            "when": "POST request is made to /users/ with an extra field",
            "then": "User is created and extra field is ignored in response"
          },
          "implementation_id": "endpoint_create_user_post_/users/"
        },
        {
          "id": "empty_body",
          "name": "test_create_user_empty_body",
          "description": "Attempt to create a user with an empty request body.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Missing required fields: username, email, age, work_role\"}",
          "test_setup": {
            "given": "No user exists with the intended email",
            "when": "POST request is made to /users/ with empty body",
            "then": "HTTP 422 error is returned indicating all required fields are missing"
          },
          "implementation_id": "endpoint_create_user_post_/users/"
        }
      ]
    },
    {
      "implementation_id": "endpoint_create_user_post_/users_",
      "test_cases": [
        {
          "id": "add_user_success",
          "name": "Add user successfully",
          "description": "Verify that a new user can be added with valid username, email, age, and work_role.",
          "type": "positive",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"john_doe\", \"email\": \"john@example.com\", \"age\": 30, \"work_role\": \"developer\"}",
          "response_status_code": 201,
          "response_body_json": "{\"username\": \"john_doe\", \"email\": \"john@example.com\", \"age\": 30, \"work_role\": \"developer\", \"id\": 1}",
          "test_setup": {
            "given": "No user exists with email 'john@example.com'",
            "when": "A POST request is made to /users/ with valid user data",
            "then": "A new user is created and returned with status 201"
          },
          "implementation_id": "endpoint_create_user_post_/users_"
        },
        {
          "id": "duplicate_email",
          "name": "Fail to add user with duplicate email",
          "description": "Verify that adding a user with an email already registered returns HTTP 400.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"jane_doe\", \"email\": \"john@example.com\", \"age\": 25, \"work_role\": \"designer\"}",
          "response_status_code": 400,
          "response_body_json": "{\"detail\": \"Email already registered\"}",
          "test_setup": {
            "given": "A user already exists with email 'john@example.com'",
            "when": "A POST request is made to /users/ with the same email",
            "then": "The API returns HTTP 400 with error message 'Email already registered'"
          },
          "implementation_id": "endpoint_create_user_post_/users_"
        },
        {
          "id": "missing_username",
          "name": "Fail to add user with missing username",
          "description": "Verify that missing the username field returns HTTP 422 (Unprocessable Entity).",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"email\": \"unique@example.com\", \"age\": 22, \"work_role\": \"tester\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Field 'username' is required\"}",
          "test_setup": {
            "given": "No user exists with email 'unique@example.com'",
            "when": "A POST request is made to /users/ without the username field",
            "then": "The API returns HTTP 422 with a validation error"
          },
          "implementation_id": "endpoint_create_user_post_/users_"
        },
        {
          "id": "invalid_email_format",
          "name": "Fail to add user with invalid email format",
          "description": "Verify that an invalid email format returns HTTP 422 (Unprocessable Entity).",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"invalid_email\", \"email\": \"not-an-email\", \"age\": 28, \"work_role\": \"manager\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Invalid email format\"}",
          "test_setup": {
            "given": "No user exists with email 'not-an-email'",
            "when": "A POST request is made to /users/ with an invalid email format",
            "then": "The API returns HTTP 422 with a validation error"
          },
          "implementation_id": "endpoint_create_user_post_/users_"
        },
        {
          "id": "age_boundary_min",
          "name": "Add user with minimum valid age",
          "description": "Verify that a user can be added with the minimum valid age (e.g., 0 if allowed).",
          "type": "positive",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"baby_user\", \"email\": \"baby@example.com\", \"age\": 0, \"work_role\": \"intern\"}",
          "response_status_code": 201,
          "response_body_json": "{\"username\": \"baby_user\", \"email\": \"baby@example.com\", \"age\": 0, \"work_role\": \"intern\", \"id\": 2}",
          "test_setup": {
            "given": "No user exists with email 'baby@example.com'",
            "when": "A POST request is made to /users/ with age 0",
            "then": "A new user is created and returned with status 201"
          },
          "implementation_id": "endpoint_create_user_post_/users_"
        },
        {
          "id": "age_negative",
          "name": "Fail to add user with negative age",
          "description": "Verify that a negative age returns HTTP 422 (Unprocessable Entity).",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"neg_age\", \"email\": \"neg@example.com\", \"age\": -1, \"work_role\": \"tester\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Age must be a non-negative integer\"}",
          "test_setup": {
            "given": "No user exists with email 'neg@example.com'",
            "when": "A POST request is made to /users/ with age -1",
            "then": "The API returns HTTP 422 with a validation error"
          },
          "implementation_id": "endpoint_create_user_post_/users_"
        },
        {
          "id": "missing_work_role",
          "name": "Fail to add user with missing work_role",
          "description": "Verify that missing the work_role field returns HTTP 422 (Unprocessable Entity).",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"no_role\", \"email\": \"norole@example.com\", \"age\": 27}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Field 'work_role' is required\"}",
          "test_setup": {
            "given": "No user exists with email 'norole@example.com'",
            "when": "A POST request is made to /users/ without the work_role field",
            "then": "The API returns HTTP 422 with a validation error"
          },
          "implementation_id": "endpoint_create_user_post_/users_"
        },
        {
          "id": "empty_username",
          "name": "Fail to add user with empty username",
          "description": "Verify that an empty username returns HTTP 422 (Unprocessable Entity).",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"\", \"email\": \"emptyuser@example.com\", \"age\": 20, \"work_role\": \"analyst\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Username cannot be empty\"}",
          "test_setup": {
            "given": "No user exists with email 'emptyuser@example.com'",
            "when": "A POST request is made to /users/ with an empty username",
            "then": "The API returns HTTP 422 with a validation error"
          },
          "implementation_id": "endpoint_create_user_post_/users_"
        },
        {
          "id": "extra_field_ignored",
          "name": "Add user with extra field in request",
          "description": "Verify that extra fields in the request body are ignored and do not affect user creation.",
          "type": "positive",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"extra_field\", \"email\": \"extra@example.com\", \"age\": 33, \"work_role\": \"admin\", \"extra\": \"ignore_me\"}",
          "response_status_code": 201,
          "response_body_json": "{\"username\": \"extra_field\", \"email\": \"extra@example.com\", \"age\": 33, \"work_role\": \"admin\", \"id\": 3}",
          "test_setup": {
            "given": "No user exists with email 'extra@example.com'",
            "when": "A POST request is made to /users/ with an extra field",
            "then": "A new user is created and the extra field is ignored in the response"
          },
          "implementation_id": "endpoint_create_user_post_/users_"
        }
      ]
    },
    {
      "implementation_id": "endpoint_create_user_router_post_users",
      "test_cases": [
        {
          "id": "create_user_valid",
          "name": "Create user with valid data",
          "description": "Successfully create a new user with all required fields and valid data.",
          "type": "positive",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"john_doe\", \"email\": \"john@example.com\", \"age\": 30, \"work_role\": \"engineer\"}",
          "response_status_code": 201,
          "response_body_json": "{\"username\": \"john_doe\", \"email\": \"john@example.com\", \"age\": 30, \"work_role\": \"engineer\", \"id\": 1}",
          "test_setup": {
            "given": "No user exists with email 'john@example.com'",
            "when": "POST /users/ with valid user data",
            "then": "User is created and returned with status 201"
          },
          "implementation_id": "endpoint_create_user_router_post_users"
        },
        {
          "id": "create_user_duplicate_email",
          "name": "Fail to create user with duplicate email",
          "description": "Attempt to create a user with an email that already exists should fail.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"jane_doe\", \"email\": \"john@example.com\", \"age\": 25, \"work_role\": \"designer\"}",
          "response_status_code": 400,
          "response_body_json": "{\"detail\": \"Email already registered\"}",
          "test_setup": {
            "given": "A user already exists with email 'john@example.com'",
            "when": "POST /users/ with the same email",
            "then": "API returns 400 with error message"
          },
          "implementation_id": "endpoint_create_user_router_post_users"
        },
        {
          "id": "create_user_missing_username",
          "name": "Fail to create user with missing username",
          "description": "Attempt to create a user without a username should fail validation.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"email\": \"newuser@example.com\", \"age\": 22, \"work_role\": \"analyst\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Username is required\"}",
          "test_setup": {
            "given": "No user exists with email 'newuser@example.com'",
            "when": "POST /users/ without username",
            "then": "API returns 422 with validation error"
          },
          "implementation_id": "endpoint_create_user_router_post_users"
        },
        {
          "id": "create_user_missing_email",
          "name": "Fail to create user with missing email",
          "description": "Attempt to create a user without an email should fail validation.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"no_email\", \"age\": 22, \"work_role\": \"analyst\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Email is required\"}",
          "test_setup": {
            "given": "No user exists with username 'no_email'",
            "when": "POST /users/ without email",
            "then": "API returns 422 with validation error"
          },
          "implementation_id": "endpoint_create_user_router_post_users"
        },
        {
          "id": "create_user_invalid_email_format",
          "name": "Fail to create user with invalid email format",
          "description": "Attempt to create a user with an invalid email format should fail validation.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"bad_email\", \"email\": \"not-an-email\", \"age\": 22, \"work_role\": \"analyst\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Invalid email format\"}",
          "test_setup": {
            "given": "No user exists with username 'bad_email'",
            "when": "POST /users/ with invalid email format",
            "then": "API returns 422 with validation error"
          },
          "implementation_id": "endpoint_create_user_router_post_users"
        },
        {
          "id": "create_user_missing_age",
          "name": "Fail to create user with missing age",
          "description": "Attempt to create a user without age should fail validation.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"no_age\", \"email\": \"noage@example.com\", \"work_role\": \"analyst\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Age is required\"}",
          "test_setup": {
            "given": "No user exists with email 'noage@example.com'",
            "when": "POST /users/ without age",
            "then": "API returns 422 with validation error"
          },
          "implementation_id": "endpoint_create_user_router_post_users"
        },
        {
          "id": "create_user_age_boundary",
          "name": "Create user with minimum valid age",
          "description": "Successfully create a user with the minimum allowed age (e.g., 0 or 1 depending on business rule).",
          "type": "positive",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"baby_user\", \"email\": \"baby@example.com\", \"age\": 0, \"work_role\": \"infant\"}",
          "response_status_code": 201,
          "response_body_json": "{\"username\": \"baby_user\", \"email\": \"baby@example.com\", \"age\": 0, \"work_role\": \"infant\", \"id\": 2}",
          "test_setup": {
            "given": "No user exists with email 'baby@example.com'",
            "when": "POST /users/ with age 0",
            "then": "User is created and returned with status 201"
          },
          "implementation_id": "endpoint_create_user_router_post_users"
        },
        {
          "id": "create_user_negative_age",
          "name": "Fail to create user with negative age",
          "description": "Attempt to create a user with a negative age should fail validation.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"neg_age\", \"email\": \"neg@example.com\", \"age\": -1, \"work_role\": \"analyst\"}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Age must be a non-negative integer\"}",
          "test_setup": {
            "given": "No user exists with email 'neg@example.com'",
            "when": "POST /users/ with negative age",
            "then": "API returns 422 with validation error"
          },
          "implementation_id": "endpoint_create_user_router_post_users"
        },
        {
          "id": "create_user_missing_work_role",
          "name": "Fail to create user with missing work_role",
          "description": "Attempt to create a user without work_role should fail validation.",
          "type": "negative",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"no_role\", \"email\": \"norole@example.com\", \"age\": 22}",
          "response_status_code": 422,
          "response_body_json": "{\"detail\": \"Work role is required\"}",
          "test_setup": {
            "given": "No user exists with email 'norole@example.com'",
            "when": "POST /users/ without work_role",
            "then": "API returns 422 with validation error"
          },
          "implementation_id": "endpoint_create_user_router_post_users"
        },
        {
          "id": "create_user_extra_fields",
          "name": "Create user with extra fields in request",
          "description": "Successfully create a user when extra, unexpected fields are present in the request body (should ignore extra fields).",
          "type": "positive",
          "request_method": "POST",
          "request_url": "/users/",
          "request_headers": {
            "Content-Type": "application/json"
          },
          "request_body_json": "{\"username\": \"extra_user\", \"email\": \"extra@example.com\", \"age\": 28, \"work_role\": \"tester\", \"extra_field\": \"ignore_me\"}",
          "response_status_code": 201,
          "response_body_json": "{\"username\": \"extra_user\", \"email\": \"extra@example.com\", \"age\": 28, \"work_role\": \"tester\", \"id\": 3}",
          "test_setup": {
            "given": "No user exists with email 'extra@example.com'",
            "when": "POST /users/ with extra fields",
            "then": "User is created and extra fields are ignored"
          },
          "implementation_id": "endpoint_create_user_router_post_users"
        }
      ]
    }
  ]
}